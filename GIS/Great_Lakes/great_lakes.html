<!DOCTYPE html>
<html>
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf8"/>
	<meta name"author" content="Callum East"/>	
	<title>Callum East - Home Page</title>
</head>

<style>
	.topbar{
		width:100%;
		height:100px;
		background-color: peru;
		display:flex;
	}
	.hideDir{
		width:5%;
		background-color: cyan;
	}
	.container{
		width:100%;
		display:flex;
	}
	#directory{
		background-color: blue;
		text-align: center;
		width: 20%;
		height: 100%;
		display:none;
		padding-bottom: 40px;
	}

	#content{
		background-color: red;
		text-align: center;
		width: 60%;
		height: 100%;
		margin: 0% 0% 0% 20%
	}
	blockquote{
		background-color: blue;
		width: 90%;
		height: 100%;
	}

	img {
		height: 60%;
		width: 60%;
	}
</style>

<body bgcolor="green">

	<div class="topbar">
		<div class="hideDir" onclick="hideDir()">
			=
		</div>
	</div>

	<div class="container">
		<div id="directory">
			<h2>GIS</h2>
			<br>Finding Candian Sheild in Ontario</br>
			<br>Extracting Great Lakes from Satellite image</br>
			<br>aksjdsa</br>
			<br>aksjdsa</br>
			<br>aksjdsa</br>
			<br>aksjdsa</br>
		</div>
		<div id="content"> 
			<h1>Extracting the Great Lakes from Landsat satellite imagry</h1>
			<p> 
				For this study we will be using Band 5 of the landsat 8 and 9 dataset which you can download
				<a href="">here</a>. Ensure that you download data that has no, or very little cloud coverage
				i.e. cloud coverage < 1%. Ensure that you download enough data to cover all the lakes fully. 
				You will only need Band 5, which in my case was ~2GB all images. The images you download should have 
				the a name similar to:
			</p>
			<code>LC08_L1TP_016030_20251006_20251115_02_T1_B5.TIF</code>

			<blockquote> Note data file name must contain _B5.TIF and start with either LC08 or LC09.
			If you chose LC08 make sure all files start with LC08. Same if you choose LC09.
			You will need to make an account to download this data.</blockquote>
			
			<p>You can open the data in <button>Qgis</button> to get something that looks like this:</p>
			<img src="./images/Pre_Process_Great_Lakes.png">
			
			<h3>Why Band 5?</h3>
			<p>
				Band 5 in the Landsat 8 and 9 represents the near infrared band of the elecrtomagnetic spectrum.
				Near infrared is strongly absorbed and poorly reflectly by water. This means water
				will appear very dark in infrared images as you can see in the image above. 
				We can exploit this property to determine there is water in the photo.
			</p>
			<!`https://www.geeksforgeeks.org/html/how-to-fix-images-not-showing-in-html/`>
			<h3>Extracting water</h3>
			<p> We will start by using the indentifying tool and clicking at different spots in the raster photo to find the values. Here we are trying to determine what the 
			cut off is for water and land. On average I get water to be ~6000, with parts of the water going up to ~9000. I found
			that the darkest parts of land sits a little over 10000. With this knowledge we can create a cutoff for where there 
			is land and where there is water. I will say that anything below 10000 is water, anything above is land, it might be 
			different for you. After we determine a threshold, we can remove anything that isn't water by using a raster calculator. 
			For the purpose of this study we will be using <a href="">Whitebox Workflow's</a> raster calculator, developed by <a href="">John Lindsay</a>
			The command for the raster calculator with a threshold of 10000 can be writen as followed, where "'raster'" can be any word and "[raster]"
			is the raster image read in from by the program from the command wbe.read_raster():
			</p>
			<code>"raster = wbe.raster_calculator("'raster' < 10000", [raster])"</code>

			<blockquote> Note that we are using this raster calculator rather than QGIS built in one as Whitebox Workflows has a Python API that we will be 
			using for this study. Whitebox Workflows keeps calculated rasters in memory, so when we want to use multiple tools it will be faster to do it this way.
			</blockquote>
			<img src="./images/Raster_calc.png">
			
			<h3> Converting to Vector</h3>
			
			<p>Now that we have extracted the water, it is time to move convert our rasters to vectors. We do this so that we can combine our data much easier
			using the <a href="">Union processing</a> tool. However, Union can be quite a taxing tool on our computer if there are too many polygons, so we start by reducing 
			the number of polygons that would be generated by our rasters by using the <a href="">Opening tool</a>. This tool works by remove x number of pixels outside the 
			paremeter of all shapes in the raster image, which will remove a lot of smaller shapes while keeing the larger shapes relativly intact. The Opening tool has two values,
			one for x, one for y. I suggest you keep them the same for this study. 
			</p>
		
			<code> raster = wbe.opening(raster, 40, 40) </code>
			
			<blockquote> Note that for this study I will be using an opening value of 40 since I am on a relativly low end laptop for this study. If you want more accuracy and are
			running on a higher end computer you can use a lower opening value or skip using opening all together. Just note that Union will take longer with lower opening values
			</blockquote> 
			
			<p>Now we can convert the raster to vector. We can do this using the wbe.raster_to_vector_polygons tool. This takes just one value which is the raster. From this tool 
			you should receive a vector image similar to the following.</p>
			
			<code> vector = wbe.raster_to_vector_polygons(raster) </code>
			<br></br>
			<img src="images/Raster_to_Vector.png">
			
			<h3>Creating a script</h3>
			<p> We can automate the previous commands for all</p>

			<br></br>
			<a href="../../index.html"> back </a>
		</div>
	</div>

</body>

<script>
	function hideDir() {
		var dir = document.getElementById("directory");
		var content = document.getElementById("content");
		if (dir.style.display === "none") {
			dir.style.display = "block";
			content.style.margin = "0% 0% 0% 10%";
		  } else {
			dir.style.display = "none";
			content.style.margin = "0% 0% 0% 20%";
		}
	}
</script>

</html>
